# Sandpile 接口文档

## 文档说明

### 接口规范

采用HTTP传输，统一所有接口方法为POST

返回值格式：

- 成功时

  | 字段名 | 类型   | 是否必须 | 描述                                       |
  | ------ | ------ | -------- | ------------------------------------------ |
  | status | Number | 是       | 状态标识，成功时为1                        |
  | data   | Object | 否       | 响应的数据，接口描述中的响应数据即为该字段 |

- 失败时

  | 字段名    | 类型   | 是否必须 | 描述                                                   |
  | --------- | ------ | -------- | ------------------------------------------------------ |
  | status    | Number | 是       | 状态标识，失败时为0                                    |
  | errorCode | Number | 是       | 错误码                                                 |
  | errorInfo | String | 否       | 具体的错误信息，可以直接使用中文，主要用于调试而非展示 |



## 接口-基本

### login

接口描述：登录

接口地址：`/api/base/login`



请求参数：

| 字段名   | 类型   | 是否必须 | 描述                                                         |
| -------- | ------ | -------- | ------------------------------------------------------------ |
| account  | String | 是       | 账号                                                         |
| password | String | 是       | 密码。加密方式：将输入值进行32位大写MD5加密后，在字符串末尾拼接账号字符串，再将拼接后的字符串进行32位大写MD5加密 |



响应数据：

| 字段名   | 类型   | 是否必须 | 描述                                                      |
| -------- | ------ | -------- | --------------------------------------------------------- |
| id       | Number | 是       | 用户id                                                    |
| userName | String | 是       | 用户名                                                    |
| token    | String | 是       | 颁发的token，发送请求时需将请求头的Authorization设为token |



### logout

接口描述：登出

接口地址：`/api/base/logout`



请求参数：无，但请求时必须携带token



响应数据：无



## 接口-笔记

### listProjects

接口描述：根据查询条件，查询并返回符合条件的笔记项目

接口地址：`/api/note/listProjects`



请求参数：无



响应数据：

| 字段名       | 类型                 | 是否必须 | 描述         |
| ------------ | -------------------- | -------- | ------------ |
| noteProjects | `Array<NoteProject>` | 是       | 笔记项目数组 |

- NoteProject对象：

  | 字段名         | 类型   | 是否必须 | 描述                                    |
  | -------------- | ------ | -------- | --------------------------------------- |
  | id             | Number | 是       | 项目id                                  |
  | projectName    | String | 是       | 项目名称                                |
  | createUserName | String | 是       | 创建者名称                              |
  | createTime     | String | 是       | 创建时间，格式为`"2023-06-04 22:31:21"` |



### addProject

接口描述：新增笔记项目

接口地址：`/api/note/addProject`



请求参数：

| 字段名      | 类型   | 是否必须 | 描述           |
| ----------- | ------ | -------- | -------------- |
| projectName | String | 是       | 笔记项目的名称 |



响应数据：无





### deleteProject

接口描述：删除某一指定笔记项目

接口地址：`/api/note/deleteProject`



请求参数：

| 字段名 | 类型   | 是否必须 | 描述         |
| ------ | ------ | -------- | ------------ |
| id     | Number | 是       | 目标项目的id |



响应数据：无



### updateProject

接口描述：更新某一指定笔记项目的信息

接口地址：`/api/note/updateProject`



请求参数：

| 字段名      | 类型   | 是否必须 | 描述             |
| ----------- | ------ | -------- | ---------------- |
| id          | Number | 是       | 目标项目的id     |
| projectName | String | 否       | 更改后的项目名称 |



响应数据：无

### getProjectDetail

接口描述：获取目标笔记项目的详情，如内部的笔记及文件夹信息等

接口地址：`/api/note/getProjectDetail`



请求参数：

| 字段名 | 类型   | 是否必须 | 描述         |
| ------ | ------ | -------- | ------------ |
| id     | Number | 是       | 目标项目的id |



响应数据：

| 字段名      | 类型                | 是否必须 | 描述             |
| ----------- | ------------------- | -------- | ---------------- |
| projectName | String              | 是       | 项目名称         |
| notes       | `Array<Note>`       | 否       | 项目内部的笔记   |
| noteFolders | `Array<NoteFolder>` | 否       | 项目内部的文件夹 |

- Note对象：

  | 字段名   | 类型   | 是否必须 | 描述                                         |
  | -------- | ------ | -------- | -------------------------------------------- |
  | id       | Number | 是       | 笔记id                                       |
  | name     | String | 是       | 笔记名                                       |
  | folderId | Number | 是       | 所属文件夹id，若位于笔记项目的根目录，则为-1 |

- NoteFolder对象：

  | 字段名   | 类型   | 是否必须 | 描述                                         |
  | -------- | ------ | -------- | -------------------------------------------- |
  | id       | Number | 是       | 文件夹id                                     |
  | name     | String | 是       | 文件夹名                                     |
  | folderId | Number | 是       | 所属文件夹id，若位于笔记项目的根目录，则为-1 |



### getNoteText

接口描述：获取目标笔记的详情

接口地址：`/api/note/getNoteText`



请求参数：

| 字段名 | 类型   | 是否必须 | 描述         |
| ------ | ------ | -------- | ------------ |
| id     | Number | 是       | 目标笔记的id |



响应数据：

| 字段名 | 类型   | 是否必须 | 描述                           |
| ------ | ------ | -------- | ------------------------------ |
| text   | String | 是       | 笔记内容（markdown格式字符串） |



### addNoteFile

接口描述：新增笔记项目中的文件

接口地址：`/api/note/addNoteFile`



请求参数：

| 字段名    | 类型   | 是否必须 | 描述                                         |
| --------- | ------ | -------- | -------------------------------------------- |
| projectId | Number | 是       | 所在笔记项目的id                             |
| name      | String | 是       | 文件名                                       |
| folderId  | Number | 是       | 所属文件夹id，若位于笔记项目的根目录，则为-1 |



响应数据：无



### deleteNoteFile

接口描述：删除笔记项目中的文件

接口地址：`/api/note/deleteNoteFile`



请求参数：

| 字段名 | 类型   | 是否必须 | 描述         |
| ------ | ------ | -------- | ------------ |
| id     | Number | 是       | 目标文件的id |



响应数据：无



### updateNoteFile

接口描述：更新笔记项目中的文件

接口地址：`/api/note/updateNoteFile`



请求参数：

| 字段名   | 类型   | 是否必须 | 描述                                                 |
| -------- | ------ | -------- | ---------------------------------------------------- |
| id       | Number | 是       | 目标文件的id                                         |
| name     | String | 否       | 更新后的文件名                                       |
| folderId | Number | 否       | 更新后的所属文件夹id，若位于笔记项目的根目录，则为-1 |
| text     | String | 否       | 更新后的笔记内容                                     |



响应数据：无



### addNoteFolder

接口描述：在笔记项目中新增一个空文件夹

接口地址：`/api/note/addNoteFolder`



请求参数：

| 字段名    | 类型   | 是否必须 | 描述                                         |
| --------- | ------ | -------- | -------------------------------------------- |
| projectId | Number | 是       | 所在笔记项目的id                             |
| name      | String | 是       | 文件夹名                                     |
| folderId  | Number | 是       | 所属文件夹id，若位于笔记项目的根目录，则为-1 |



响应数据：无



### deleteNoteFolder

接口描述：删除笔记项目中的文件夹

接口地址：`/api/note/deleteNoteFolder`



请求参数：

| 字段名 | 类型   | 是否必须 | 描述           |
| ------ | ------ | -------- | -------------- |
| id     | Number | 是       | 目标文件夹的id |



响应数据：无



### updateNoteFolder

接口描述：更新笔记项目中的文件夹

接口地址：`/api/note/updateNoteFolder`



请求参数：

| 字段名   | 类型   | 是否必须 | 描述                                                 |
| -------- | ------ | -------- | ---------------------------------------------------- |
| id       | Number | 是       | 目标文件夹的id                                       |
| name     | String | 否       | 更新后的文件夹名                                     |
| folderId | Number | 否       | 更新后的所属文件夹id，若位于笔记项目的根目录，则为-1 |



响应数据：无

